(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t){e.exports={RTAppBar:{appBar:"_3Py1Z",scrollHide:"PyOfn",flat:"_1J9he",fixed:"_2dwFx",inner:"lGWLJ",title:"_37vtt",leftIcon:"_30BcY",rightIcon:"_1hv3P"},RTButton:{button:"_2Agdx",rippleWrapper:"_3AVBi",squared:"_2GH_L",icon:"_3aBSX",solid:"_1ZxqC",raised:"_221ic _2Agdx _2GH_L _1ZxqC",flat:"_1jWAQ _2Agdx _2GH_L",floating:"_3IRMZ _2Agdx _1ZxqC",mini:"_2DCN-",toggle:"hC5Z2 _2Agdx",primary:"_3tTAW",accent:"_2wp6F",neutral:"_2CPs4",inverse:"_2SPZr"},RTRipple:{rippleWrapper:"_16N7o",ripple:"_3SV_u",rippleRestarting:"_2OZWa",rippleActive:"_3O2Ue"},RTAutocomplete:{autocomplete:"_07g5",focus:"_3qQkg",suggestions:"_3-Nb6",values:"_14fVf",value:"cBUoJ",up:"_3rmye",suggestion:"_1erPE",active:"kDY3Z",input:"_1ryxc"},RTChip:{chip:"_3Iv9P",avatar:"_2o8mD",deletable:"_2hlBs",delete:"_3nnfj",deleteIcon:"_2sopz",deleteX:"_10NaZ"},RTAvatar:{avatar:"_3OjJz",image:"_2Ueo9",letter:"_26GdB"},RTInput:{input:"lFVgC",withIcon:"_1nKdf",icon:"_3ga1V",inputElement:"_4bZUj",bar:"_3FySS",label:"_34120",fixed:"GRQEP",required:"_2G0aY",hint:"bMyi_",filled:"_34NWn",error:"_2k5Jz",counter:"_1oTuT",disabled:"_3ZfJq",errored:"_2s74E",hidden:"_2gAMv"},RTCard:{card:"_8pay8",raised:"_1AHwB",cardMedia:"_3Yc6z",wide:"_35NNe",square:"_1HBxg",content:"ewAVM",contentOverlay:"_1bBKz",cardTitle:"_1dU3o",cardActions:"ZoLIG",cardText:"K_kzH",title:"_3qCP3",subtitle:"_3p3mO",large:"_2iwOK",small:"_1RHxe"},RTCheckbox:{field:"_3Tq32",ripple:"_2NWrZ",text:"dXU7C",input:"_271V1",check:"_1CXAo",checked:"nSz7s","checkmark-expand":"_3GU9D",disabled:"_2jVLS"},RTDatePicker:{input:"_2ISvI",disabled:"Cf3yF",inputElement:"x7MhN",header:"_2vLUd",year:"_1VWY-",date:"_3K2Ws",calendarWrapper:"_1t-4v",yearsDisplay:"_2OzvT",monthsDisplay:"_2DDdC",dialog:"_3fCV6",button:"_2hL6u",calendar:"_1X9ls",prev:"Nv9Bc",next:"_3iPkS",title:"_2ESpD",years:"zEdgW",active:"_1pjXb",week:"PcByv",days:"_1qh3T",day:"_2qF_L",month:"_1hSm5",slideRightEnter:"Rk89h",slideRightLeave:"_1nam4",slideRightEnterActive:"m5B3T",slideRightLeaveActive:"_2bZap",slideLeftEnter:"bGml_",slideLeftLeave:"_2WGqM",slideLeftEnterActive:"_3Ghls",slideLeftLeaveActive:"_2WLHG"},RTDialog:{wrapper:"_3nrqp",dialog:"_3lw90",active:"_3ea_1",small:"_38VTT",normal:"_1K3iz",large:"_10LcP",fullscreen:"_3tLXQ",title:"_2J-aP",body:"_1Ivuq",navigation:"wgwdj",button:"_22_c6"},RTOverlay:{overlay:"_2LA9x",active:"_1mb5R"},RTDrawer:{wrapper:"_3eRY8",drawer:"_1sAOY",active:"EWFXC",right:"_2-4-H",left:"FKhpR"},RTDropdown:{dropdown:"ZzBNK",active:"_1DQ-E",values:"_2767w",label:"_2KjGM",value:"_6c1D5",up:"_1OA-G",disabled:"_1skVH",field:"d5bru",errored:"_3dZUG",templateValue:"_6dCtT",required:"_1j4LX",error:"fySw3",selected:"_3uiEo"},RTLayout:{layout:"wiKya",panel:"_3aW3s",bodyScroll:"_2uzOU",sidebarDrawer:"_2kCN0",navDrawerDrawer:"Cte92",pinned:"qf0ha",clipped:"_1y5eh",appbarInner:"_1S9wz",appbarFixed:"_2Q-xL",appbarAppBar:"F9Fy2",navDrawerPinned:"_2eOy5",appbarLeftIcon:"fZ13o",navDrawerClipped:"_2kROG",navDrawerWrapper:"_2gpOZ",sidebarPinned:"_3yo9c",sidebarClipped:"_1paQt",sidebarWrapper:"_1TUxm",sidebarWidth1:"_1EWpa",sidebarWidth2:"_37z5O",sidebarWidth3:"_24Dtc",sidebarWidth4:"_28mqi",sidebarWidth5:"K39iB",sidebarWidth6:"_2PjBX",sidebarWidth7:"_16Oxc",sidebarWidth8:"_3fr9v",sidebarWidth9:"iF_4K",sidebarWidth10:"_3mnwI",sidebarWidth11:"_2uccf",sidebarWidth12:"_1pU-9",sidebarWidth25:"_10h-v",sidebarWidth33:"BYRr2",sidebarWidth50:"_2L3ft",sidebarWidth66:"_31jol",sidebarWidth75:"_2Xvmh",sidebarWidth100:"_3T7B6"},RTLink:{icon:"_1-mD4",link:"_1Od3D",active:"_3blKB"},RTList:{list:"caNNQ",divider:"_2Jg3-",subheader:"q2l8C",inset:"_1HHo_",listItem:"ni6RH",ripple:"_2mi0Y",item:"_2GtDw",selectable:"_1OoR-",disabled:"_38DD6",checkboxItem:"OVyge",checkbox:"_3SG-0",left:"bHOJq",right:"OQ3Je",itemAction:"VB7pN",itemContentRoot:"_2FBCh",large:"EO5bo",itemText:"_12FqV",primary:"_3SxNr"},RTMenu:{iconMenu:"_2aMxm",icon:"_1b8Ml",menu:"_1gvr5",topLeft:"SYeW8",outline:"_2PdTB",topRight:"DFQvY",bottomLeft:"_3i7lA",bottomRight:"_3q-zB",static:"_2xf5n",menuInner:"_2t8UE",rippled:"_3o1JI",active:"_2Cekp",menuItem:"lyzBJ",disabled:"zGTpA",selected:"_2-j_P",ripple:"_2m_Cl",caption:"_3MsfE",shortcut:"_1anRY",menuDivider:"VX5Lv"},RTNavigation:{horizontal:"_1MJ9B",vertical:"xUlwz"},RTProgressBar:{linear:"_3vxHj",indeterminate:"_1gPzb",value:"I0PhY","linear-indeterminate-bar":"_1cU21",buffer:"SzbNd",circular:"_2j3vC",circle:"DlWjM","circular-indeterminate-bar-rotate":"zfZzh",path:"_1xZSU","circular-indeterminate-bar-dash":"_3DSlU",multicolor:"_3XHT8",colors:"Z_PDt"},RTRadio:{radio:"_1vWJb",ripple:"_78FVB",radioChecked:"_210O6 _1vWJb",field:"_36UDg",text:"_3guDD",input:"_2CPDD",disabled:"_39I6g _36UDg"},RTSlider:{container:"_-dLk",knob:"kq8Om",innerknob:"_8VjZ5",snaps:"_2x5j_",snap:"_12aGJ",input:"_2JHGy",progress:"_2R4jW",innerprogress:"_3p0mR",slider:"_3-BtZ",editable:"hkAL6",pinned:"_28Oo0",pressed:"_292qK",ring:"_2Oh5L"},RTSnackbar:{snackbar:"zDi3X",accept:"_2Y0Cy",button:"_2pCxU",warning:"_2li3o",cancel:"_3731C",active:"_38CsO",label:"_1JIbY"},RTSwitch:{field:"_1T2D0",text:"rxx-p",thumb:"_1pMry",ripple:"_1I9tv",on:"p92Yp",off:"_25ui_",input:"_3BTU_","switch-on":"_2Bwve","switch-off":"_1ZBFp",disabled:"_1CQ_q _1T2D0"},RTTable:{table:"_2xofu",head:"_1eF5Z",row:"_1qppP",selected:"_1H1dU",rowCell:"_18bqN",headCell:"gfcPv",numeric:"_3suRQ",checkboxCell:"_2yhwA",sorted:"_2r5OG",sortIcon:"_3NJs5",asc:"wZHUA"},RTTabs:{tabs:"_2EaQV",navigation:"_3e55Z",navigationContainer:"_3oZmF",arrow:"wPL4g",arrowContainer:"i_TGW",label:"_1yb8L",rippleWrapper:"_3c0W3",active:"_2LZ7Z",disabled:"_2gi1s",hidden:"_3kq1J",withIcon:"_1OFOx",withText:"_1Yf4A",icon:"_1LUZH",pointer:"_1xgdB",tab:"_26SP9",fixed:"_3bROj",inverse:"_33mT_"},RTTooltip:{tooltip:"_1v8bI",tooltipActive:"_2xWjx",tooltipTop:"_1PfOK",tooltipLeft:"_3uj3d",tooltipRight:"_3UQWj",tooltipInner:"_9q2WH"},RTTimePicker:{input:"_2APuy",disabled:"_2Vc_4",inputElement:"_2Z4kT",header:"_2u1sB",hours:"_3Kl2E",minutes:"_3Bp7w",separator:"_1c2VQ",ampm:"_1vAVQ",am:"_14hQA",pm:"aU9C9",dialog:"_1YlHq",button:"_1Kf0L",hoursDisplay:"_2JeOG",minutesDisplay:"_3UMNx",amFormat:"_26MJk",pmFormat:"_3H_-m",clock:"_2CwF0",placeholder:"zCpyM",clockWrapper:"_3paoD",face:"_3ui0r",number:"qr9pw",active:"_30yS_",hand:"_1rtAF",small:"_3eEHh",knob:"VqPQb",zoomInEnter:"_3DTnI",zoomInLeave:"_1tgJ3",zoomInEnterActive:"_1Fr4_",zoomInLeaveActive:"_1EUpH",zoomOutEnter:"_1Lb15",zoomOutLeave:"_3LDEu",zoomOutEnterActive:"_3y67C",zoomOutLeaveActive:"_18Ean"}}},140:function(e,t,n){e.exports=n(311)},237:function(e,t,n){},250:function(e,t,n){},252:function(e,t,n){},273:function(e,t,n){},309:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(54),o=(n(237),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function l(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var c=n(32),s=n(46),d=function(e,t){return e.findIndex(function(e){return e.id===t})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_DIVES":return t.dives;case"ADD_DIVE":return Object(s.a)(e).concat([t.dive]);case"EDIT_DIVE":var n=d(e,t.dive.id);return Object(s.a)(e.slice(0,n)).concat([t.dive],Object(s.a)(e.slice(n+1)));case"DELETE_DIVE":var a=d(e,t.dive.id);return Object(s.a)(e.slice(0,a)).concat(Object(s.a)(e.slice(a+1)));default:return e}},_=Object(c.c)({active:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_DIALOG":return!e;default:return e}},formType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch((arguments.length>1?arguments[1]:void 0).type){case"EDIT_DIVE":case"ADD_DIVE":return null;case"OPEN_EDIT_FORM":return"edit";case"OPEN_ADD_FORM":return"add";default:return e}}}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_DISPLAY":return e===t.index?null:t.index;default:return e}},m=!!localStorage.getItem("token"),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN":return localStorage.setItem("token",t.token),!0;case"LOGGED_OUT":return localStorage.removeItem("token"),!1;default:return e}},g=Object(c.c)({divelist:u,diveDisplay:p,dialog:_,isLoggedIn:h}),v=n(133),b=n(134),f=n.n(b),E=(n(247),function(){var e=[f.a,v.a];return Object(c.d)(g,c.a.apply(void 0,e))}),D=n(14),y=n(312),O=n(315),w=n(314),j=(n(250),n(313)),C=n(23),T=n(24),k=n(25),x=n(26),L=n(28),I=(n(252),n(44)),A=n(11),R=n.n(A),W=function(){return function(e){e({type:"TOGGLE_DIALOG"})}},S=function(e){return function(t){t({type:"TOGGLE_DISPLAY",index:e})}},P=n(45),G=function(){return{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("token")||"")}}},N=function(e){return fetch("/dives",Object(P.a)({method:"POST"},G(),{body:JSON.stringify(e)})).then(function(e){return e.json()})},B=function(e){return fetch("/dives/".concat(e.id),Object(P.a)({method:"PUT"},G(),{body:JSON.stringify(e)})).then(function(e){return e.json()})},z=function(e){return"".concat(e.getDate()<10?"0":"").concat(e.getDate(),"/").concat(e.getMonth()+1<10?"0":"").concat(e.getMonth()+1,"/").concat(e.getFullYear())},F=Object(D.b)(function(e,t){return{isCardDisplayed:e.diveDisplay===t.index}},{toggleDiveDetail:S,toggleDialog:W,openEditForm:function(e){return function(t){t({type:"OPEN_EDIT_FORM",dive:e})}},deleteDive:function(e){return function(t){t({type:"DELETE_DIVE",dive:e})}}})(function(e){var t=e.dive,n=e.index,a=(e.toggleDetail,e.openEditForm),r=e.toggleDialog,o=e.deleteDive;return i.a.createElement(I.Card,{style:M,onClick:function(){S(n)}},i.a.createElement(I.CardTitle,{title:t.site,subtitle:z(new Date(t.date))}),i.a.createElement(I.CardText,null,"Maximum Depth: ",t.meter," m Minutes: ",t.minute,'" '),i.a.createElement(I.CardText,null,t.note),i.a.createElement(I.CardActions,{style:{justifyContent:"space-between"}},i.a.createElement(R.a,{label:"Edit Dive",onClick:function(e){e.stopPropagation(),a(t),r()}}),i.a.createElement(R.a,{label:"Delete Dive",onClick:function(e){var n;e.stopPropagation(),(n=t.id,fetch("/dives/".concat(n),Object(P.a)({method:"DELETE"},G())).then(function(e){if(204!==e.status)throw new Error("Dive cannot be deleted.")})).then(function(){return o(t)})}})))}),M={width:"70%",margin:"0 auto",color:"black",backgroundColor:"rgb(137, 178, 238)",boxShadow:"0.15em 0.15em black",border:"0.1em solid black"},V=(n(273),function(e){return"".concat(e.getDate()<10?"0":"").concat(e.getDate(),"/").concat(e.getMonth()+1<10?"0":"").concat(e.getMonth()+1,"/").concat(e.getFullYear())}),Z=Object(D.b)(function(e,t){return{isCardDisplayed:e.diveDisplay===t.index}},{toggleDiveDetail:S})(function(e){var t=e.index,n=e.dive,a=e.isCardDisplayed,r=e.toggleDiveDetail;return i.a.createElement("div",null,i.a.createElement("div",{className:"DiveDisplay",onClick:function(){r(t)}},i.a.createElement("span",{className:"diveName"},n.site),i.a.createElement("span",{className:"meterAndMinute"},n.meter,"m ",n.minute,'"'),i.a.createElement("span",{className:"diveDate"},V(new Date(n.date)))),a?i.a.createElement(F,{dive:n,index:t}):null)}),U=function(e){function t(){return Object(C.a)(this,t),Object(k.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){fetch("/dives",G()).then(function(e){return e.json()}).then(this.props.receiveDives)}},{key:"render",value:function(){var e=this.props.divelist;return i.a.createElement("div",{className:"DiveList"},e.map(function(e,t){return i.a.createElement(Z,{key:t,dive:e,index:t})}))}}]),t}(a.Component),q=U=Object(D.b)(function(e){return{divelist:e.divelist}},{receiveDives:function(e){return function(t){t({type:"RECEIVE_DIVES",dives:e})}}})(U),J=n(41),H=n.n(J),Y=n(27),K=n(8),Q=n(19),X=n.n(Q),$=n(136),ee=n.n($),te=function(){return i.a.createElement("svg",{viewBox:"0 0 129 129",enableBackground:"new 0 0 129 129",width:"20px",height:"20px"},i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{d:"m119.2,114.3h-109.4c-2.3,0-4.1,1.9-4.1,4.1s1.9,4.1 4.1,4.1h109.5c2.3,0 4.1-1.9 4.1-4.1s-1.9-4.1-4.2-4.1z",fill:"#006DF0"}),i.a.createElement("path",{d:"m5.7,78l-.1,19.5c0,1.1 0.4,2.2 1.2,3 0.8,0.8 1.8,1.2 2.9,1.2l19.4-.1c1.1,0 2.1-0.4 2.9-1.2l67-67c1.6-1.6 1.6-4.2 0-5.9l-19.2-19.4c-1.6-1.6-4.2-1.6-5.9-1.77636e-15l-13.4,13.5-53.6,53.5c-0.7,0.8-1.2,1.8-1.2,2.9zm71.2-61.1l13.5,13.5-7.6,7.6-13.5-13.5 7.6-7.6zm-62.9,62.9l49.4-49.4 13.5,13.5-49.4,49.3-13.6,.1 .1-13.5z",fill:"#006DF0"}))))},ne=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(k.a)(this,Object(x.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(Y.a)({},e.target.name,e.target.value))},n.handleDatePick=function(e){n.setState({date:e})},n.formType=e.formType,"add"===n.formType?(n.formHandler=function(t){N(t).then(e.addDive)},n.state={id:e.addId,site:"",meter:"",minute:"",date:"",note:""}):"edit"===n.formType&&(n.formHandler=function(t){B(t).then(e.editDive)},n.state=e.diveToEdit),n.sendDiveData=n.sendDiveData.bind(Object(K.a)(Object(K.a)(n))),n.handleChange=n.handleChange.bind(Object(K.a)(Object(K.a)(n))),n.handleDatePick=n.handleDatePick.bind(Object(K.a)(Object(K.a)(n))),n}return Object(L.a)(t,e),Object(T.a)(t,[{key:"sendDiveData",value:function(){this.formHandler(this.state),this.props.toggleDialog()}},{key:"render",value:function(){var e=this.state,t=e.site,n=e.meter,a=e.minute,r=e.date,o=e.note;return i.a.createElement("div",{className:"DiveForm",style:{textAlign:"center",justifyContent:"center"},onChange:this.handleChange.bind(this)},i.a.createElement(X.a,{type:"text",label:"Site",name:"site",value:t}),i.a.createElement(X.a,{type:"number",label:"Meters",name:"meter",value:n}),i.a.createElement(X.a,{type:"number",label:"Minutes",name:"minute",value:a}),i.a.createElement(ee.a,{label:"Date",name:"date",value:r?new Date(r):"",onChange:this.handleDatePick,sundayFirstDayOfWeek:!0}),i.a.createElement(X.a,{type:"text",multiline:!0,label:"Notes",name:"note",value:o}),"add"===this.formType?i.a.createElement(R.a,{onClick:this.sendDiveData,icon:"add",label:"add",primary:!0}):"","edit"===this.formType?i.a.createElement(R.a,{onClick:this.sendDiveData,icon:i.a.createElement(te,null),label:"edit",primary:!0}):"")}}]),t}(a.Component),ae=Object(D.b)(function(e,t){return{formType:e.dialog.formType,diveToEdit:function(e){var t=e.diveDisplay;return e.divelist[t]}(e),addId:e.divelist.length}},{addDive:function(e){return function(t){t({type:"ADD_DIVE",dive:e})}},editDive:function(e){return function(t){t({type:"EDIT_DIVE",dive:e})}},toggleDialog:W})(ne),ie=Object(D.b)(function(e){return{active:e.dialog.active}},{toggleDialog:W})(function(e){var t=e.active,n=e.toggleDialog;return i.a.createElement(H.a,{active:t,onEscKeyDown:n,onOverlayClick:n,type:"normal"},i.a.createElement(ae,null))}),re=Object(D.b)(function(e){return{isLoggedIn:e.isLoggedIn}},function(e){return{onAddClick:function(){e(function(e){e({type:"OPEN_ADD_FORM"})}),e(function(e){e({type:"TOGGLE_DIALOG"})})},logOut:function(){fetch("/auth/logout",G()).then(e(function(e){e({type:"LOGGED_OUT"})}))}}})(function(e){var t=e.onAddClick,n=e.isLoggedIn,a=e.logOut;return n?i.a.createElement("div",{className:"App"},i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(R.a,{style:{margin:"15px 15px 0"},label:"Log Out",raised:!0,primary:!0,onClick:function(){return a()}})),i.a.createElement("h1",null,"Divebook Application"),i.a.createElement(R.a,{icon:"add",label:"New Dive",raised:!0,primary:!0,onClick:t}),i.a.createElement(ie,null),i.a.createElement(q,null)):i.a.createElement(j.a,{to:"/login"})}),oe=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(k.a)(this,Object(x.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(Y.a)({},e.target.name,e.target.value))},n.state={email:"",password:"",emailError:"",passwordError:"",errorMessage:null},n.submit=n.submit.bind(Object(K.a)(Object(K.a)(n))),n.handleChange=n.handleChange.bind(Object(K.a)(Object(K.a)(n))),n}return Object(L.a)(t,e),Object(T.a)(t,[{key:"submit",value:function(){var e=this,t=this.state;(function(e,t){return fetch("/auth/login",Object(P.a)({method:"POST"},G(),{body:JSON.stringify({email:e,password:t})})).then(function(e){if(401===e.status||400===e.status)throw new Error("Invalid email or password!");return e.json()})})(t.email,t.password).then(function(t){return e.props.setLogin(t)}).catch(function(t){return e.setState({errorMessage:t.message})})}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.errorMessage;return this.props.isLoggedIn?i.a.createElement(j.a,{to:"/"}):i.a.createElement("div",{className:"LoginForm",style:{textAlign:"center",justifyContent:"center"},onChange:this.handleChange.bind(this)},i.a.createElement("div",{style:{display:!!a,color:"red"}},i.a.createElement("em",null,a)),i.a.createElement(X.a,{type:"text",label:"E-mail",name:"email",value:t}),i.a.createElement(X.a,{type:"password",label:"Password",name:"password",value:n}),i.a.createElement(R.a,{onClick:this.submit,label:"Log In",primary:!0}))}}]),t}(a.Component),le=Object(D.b)(function(e){return{isLoggedIn:e.isLoggedIn}},{setLogin:function(e){var t=e.token;return function(e){e({type:"LOGGED_IN",token:t})}}})(oe),ce=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(k.a)(this,Object(x.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(Y.a)({},e.target.name,e.target.value))},n.state={email:"",password:"",emailError:"",passwordError:"",errorMessage:null},n.submit=n.submit.bind(Object(K.a)(Object(K.a)(n))),n.handleChange=n.handleChange.bind(Object(K.a)(Object(K.a)(n))),n}return Object(L.a)(t,e),Object(T.a)(t,[{key:"submit",value:function(){var e=this,t=this.state,n=t.email,a=t.password,i=new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(n)?null:"E-mail is invalid",r=a.length<8?"Password should contain at least 8 character":null;this.setState({emailError:i,passwordError:r}),i||r||function(e,t){return fetch("/auth/signup",Object(P.a)({method:"POST"},G(),{body:JSON.stringify({email:e,password:t})})).then(function(e){if(401===e.status)throw new Error("You already registered with this e-mail!");return e.json()})}(n,a).then(function(){return e.props.onSuccess()}).catch(function(t){return e.setState({errorMessage:t.message})})}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.emailError,a=e.password,r=e.passwordError,o=e.errorMessage;return i.a.createElement("div",{className:"LoginForm",style:{textAlign:"center",justifyContent:"center"},onChange:this.handleChange.bind(this)},i.a.createElement("div",{style:{display:!!o,color:"red"}},i.a.createElement("em",null,o)),i.a.createElement(X.a,{type:"text",label:"E-mail",name:"email",value:t,error:n}),i.a.createElement(X.a,{type:"password",label:"Password",name:"password",value:a,error:r}),i.a.createElement(R.a,{onClick:this.submit,label:"Sign Up",primary:!0}))}}]),t}(a.Component),se=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(k.a)(this,Object(x.a)(t).call(this,e))).state={loginToggle:!1,signupToggle:!1},n.toggle=n.toggle.bind(Object(K.a)(Object(K.a)(n))),n}return Object(L.a)(t,e),Object(T.a)(t,[{key:"toggle",value:function(e){this.setState(Object(Y.a)({},e,!this.state[e]))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loginToggle,a=t.signupToggle,r=function(){return e.toggle("loginToggle")},o=function(){return e.toggle("signupToggle")};return i.a.createElement("div",{style:{textAlign:"center",justifyContent:"center",marginTop:"35vh"}},i.a.createElement("h1",null,"Divebook Application"),i.a.createElement("div",{style:{width:"20%",margin:"auto"}},i.a.createElement(R.a,{style:{width:"100%",margin:"2%"},label:"Sign Up",raised:!0,primary:!0,onClick:o}),i.a.createElement(R.a,{style:{width:"100%",margin:"2%"},label:"Log in",raised:!0,primary:!0,onClick:r}),i.a.createElement(H.a,{active:a,onEscKeyDown:o,onOverlayClick:o,type:"normal"},i.a.createElement(ce,{onSuccess:o})),i.a.createElement(H.a,{active:n,onEscKeyDown:r,onOverlayClick:r,type:"normal"},i.a.createElement(le,null))))}}]),t}(a.Component),de=n(137),ue=n.n(de),_e=n(138),pe=n.n(_e),me=(n(309),function(e){var t=e.store;return i.a.createElement(D.a,{store:t},i.a.createElement(ue.a,{theme:pe.a},i.a.createElement(y.a,null,i.a.createElement(O.a,null,i.a.createElement(w.a,{exact:!0,path:"/",component:re}),i.a.createElement(w.a,{path:"/login",component:se})))))}),he=E();Object(r.render)(i.a.createElement(me,{store:he}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/divebook-frontend",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/divebook-frontend","/service-worker.js");o?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):l(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):l(e)})}}()}},[[140,2,1]]]);
//# sourceMappingURL=main.dd7e53b2.chunk.js.map